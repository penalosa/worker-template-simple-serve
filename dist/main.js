!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){const r=n(1),{status:o,json:s,text:a,html:i}=n(3),u=n(4);addEventListener("fetch",t=>{t.respondWith(async function(t){return await l.route(t)}(t.request))});const l=new r;u.get&&Object.keys(u.get).forEach(t=>{l.get(t,async(e,n)=>(await u.get[t](e,n,{status:o,json:s,text:a,html:i})).toResponse())}),u.post&&Object.keys(u.post).forEach(t=>{l.post(t,async(e,n)=>(await u.post[t](e,n,{status:o,json:s,text:a,html:i})).toResponse())}),u.put&&Object.keys(u.put).forEach(t=>{l.put(t,async(e,n)=>(await u.put[t](e,n,{status:o,json:s,text:a,html:i})).toResponse())}),u.delete&&Object.keys(u.delete).forEach(t=>{l.delete(t,async(e,n)=>(await u.delete[t](e,n,{status:o,json:s,text:a,html:i})).toResponse())})},function(t,e,n){const r=n(2),o=t=>e=>e.method.toLowerCase()===t.toLowerCase(),s=o("connect"),a=o("delete"),i=o("get"),u=o("head"),l=o("options"),c=o("patch"),p=o("post"),f=o("put"),h=o("trace"),d=t=>e=>{const n=[],o=r(t,n);console.log(o);const s=new URL(e.url).pathname,a=s.match(o);return!(!a||!a[0]||a[0]!=s)&&a.slice(1).map((t,e)=>({key:n[e].name,value:t}))};t.exports=class{constructor(){this.routes=[]}handle(t,e){return this.routes.push({conditions:t,handler:e}),this}connect(t,e){return this.handle([s,d(t)],e)}delete(t,e){return this.handle([a,d(t)],e)}get(t,e){return this.handle([i,d(t)],e)}head(t,e){return this.handle([u,d(t)],e)}options(t,e){return this.handle([l,d(t)],e)}patch(t,e){return this.handle([c,d(t)],e)}post(t,e){return this.handle([p,d(t)],e)}put(t,e){return this.handle([f,d(t)],e)}trace(t,e){return this.handle([h,d(t)],e)}all(t){return this.handle([],t)}route(t){const e=this.resolve(t);if(e){const n=e.conditions[1](t);let r={};return n.forEach(t=>{r[t.key]=t.value}),e.handler(t,r)}return new Response("resource not found",{status:404,statusText:"not found",headers:{"content-type":"text/plain"}})}resolve(t){return this.routes.find(e=>!(e.conditions&&(!Array.isArray(e)||e.conditions.length))||("function"==typeof e.conditions?e.conditions(t):e.conditions.every(e=>!!e(t))))}}},function(t,e){t.exports=c,t.exports.parse=o,t.exports.compile=function(t,e){return s(o(t,e),e)},t.exports.tokensToFunction=s,t.exports.tokensToRegExp=l;var n="/",r=new RegExp(["(\\\\.)","(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?"].join("|"),"g");function o(t,e){for(var o,s=[],u=0,l=0,c="",p=e&&e.delimiter||n,f=e&&e.whitelist||void 0,h=!1;null!==(o=r.exec(t));){var d=o[0],y=o[1],g=o.index;if(c+=t.slice(l,g),l=g+d.length,y)c+=y[1],h=!0;else{var x="",m=o[2],v=o[3],w=o[4],b=o[5];if(!h&&c.length){var j=c.length-1,E=c[j];(!f||f.indexOf(E)>-1)&&(x=E,c=c.slice(0,j))}c&&(s.push(c),c="",h=!1);var O="+"===b||"*"===b,A="?"===b||"*"===b,R=v||w,T=x||p;s.push({name:m||u++,prefix:x,delimiter:T,optional:A,repeat:O,pattern:R?i(R):"[^"+a(T===p?T:T+p)+"]+?"})}}return(c||l<t.length)&&s.push(c+t.substr(l)),s}function s(t,e){for(var n=new Array(t.length),r=0;r<t.length;r++)"object"==typeof t[r]&&(n[r]=new RegExp("^(?:"+t[r].pattern+")$",u(e)));return function(e,r){for(var o="",s=r&&r.encode||encodeURIComponent,a=!r||!1!==r.validate,i=0;i<t.length;i++){var u=t[i];if("string"!=typeof u){var l,c=e?e[u.name]:void 0;if(Array.isArray(c)){if(!u.repeat)throw new TypeError('Expected "'+u.name+'" to not repeat, but got array');if(0===c.length){if(u.optional)continue;throw new TypeError('Expected "'+u.name+'" to not be empty')}for(var p=0;p<c.length;p++){if(l=s(c[p],u),a&&!n[i].test(l))throw new TypeError('Expected all "'+u.name+'" to match "'+u.pattern+'"');o+=(0===p?u.prefix:u.delimiter)+l}}else if("string"!=typeof c&&"number"!=typeof c&&"boolean"!=typeof c){if(!u.optional)throw new TypeError('Expected "'+u.name+'" to be '+(u.repeat?"an array":"a string"))}else{if(l=s(String(c),u),a&&!n[i].test(l))throw new TypeError('Expected "'+u.name+'" to match "'+u.pattern+'", but got "'+l+'"');o+=u.prefix+l}}else o+=u}return o}}function a(t){return t.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function i(t){return t.replace(/([=!:$/()])/g,"\\$1")}function u(t){return t&&t.sensitive?"":"i"}function l(t,e,r){for(var o=(r=r||{}).strict,s=!1!==r.start,i=!1!==r.end,l=r.delimiter||n,c=[].concat(r.endsWith||[]).map(a).concat("$").join("|"),p=s?"^":"",f=0;f<t.length;f++){var h=t[f];if("string"==typeof h)p+=a(h);else{var d=h.repeat?"(?:"+h.pattern+")(?:"+a(h.delimiter)+"(?:"+h.pattern+"))*":h.pattern;e&&e.push(h),h.optional?h.prefix?p+="(?:"+a(h.prefix)+"("+d+"))?":p+="("+d+")?":p+=a(h.prefix)+"("+d+")"}}if(i)o||(p+="(?:"+a(l)+")?"),p+="$"===c?"$":"(?="+c+")";else{var y=t[t.length-1],g="string"==typeof y?y[y.length-1]===l:void 0===y;o||(p+="(?:"+a(l)+"(?="+c+"))?"),g||(p+="(?="+a(l)+"|"+c+")")}return new RegExp(p,u(r))}function c(t,e,n){return t instanceof RegExp?function(t,e){if(!e)return t;var n=t.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)e.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return t}(t,e):Array.isArray(t)?function(t,e,n){for(var r=[],o=0;o<t.length;o++)r.push(c(t[o],e,n).source);return new RegExp("(?:"+r.join("|")+")",u(n))}(t,e,n):function(t,e,n){return l(o(t,n),e,n)}(t,e,n)}},function(t,e){const n={"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, PUT, DELETE","Access-Control-Allow-Headers":"Authorization, X-Auth-Token"},r=(t=200,e={},o="")=>({status:t=>r(t,e,o),headers:e=>{let n={};Object.keys(e).forEach(t=>n[t.toLowerCase()]=e[t]),r(t,e,o)},raw:n=>r(t,e,n),json:n=>r(t,{...e,"content-type":"application/json"},JSON.stringify(n)),text:n=>r(t,{...e,"content-type":"text/plain"},n),html:n=>r(t,{...e,"content-type":"text/html"},n),toResponse:()=>new Response(o,{headers:{...e,...n},status:t})});let o=r();e.status=o.status,e.headers=o.headers,e.raw=o.raw,e.json=o.json,e.text=o.text,e.html=o.html},function(t,e){t.exports={get:{"/foo/:bar":async(t,{bar:e},{status:n})=>n(200).json({hello:e}),"(.*)":async(t,{bar:e},{status:n})=>n(404).json({error:"Not found"})}}}]);